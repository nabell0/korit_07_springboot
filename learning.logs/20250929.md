#`ì…ì‹¤ ì²´í¬ í•´ì£¼ì„¸ìš” !! ğŸ’Œ

# MVC Pattern
- ì •ì˜ : ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì¡°ë¥¼ ëª¨ë¸, ë·°, ì»¨íŠ¸ë¡¤ëŸ¬ë¼ëŠ” ì„¸ ë¶€ë¶„ìœ¼ë¡œ ë¶„ë¦¬í•˜ì—¬ ê°œë°œí•˜ëŠ” ë°©ì‹.

## MVC íŒ¨í„´ì´ë€ ë¬´ì—‡ì¸ê°€
ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°–ì¶˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¡°í™”í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ë””ìì¸ íŒ¨í„´.
ì´ëŠ” ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§(ë°ì´í„° ì²˜ë¦¬), ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤(í™”ë©´ í‘œì‹œ), ê·¸ë¦¬ê³  ì´ ë‘˜ì„ ì—°ê²°í•˜ëŠ” ì œì–´ ë¡œì§ì„ ëª…í™•í•˜ê²Œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.
- MVCì˜ êµ¬ì„± ìš”ì†Œ
  - Model
    - ì—­í•  : ë°ì´í„°ì™€ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹. ì• í”Œë¦¬ì¼€ì´ì…˜ì´ 'ë¬´ì—‡ì„'í•˜ëŠ”ì§€ì— ëŒ€í•œ í•µì‹¬ì ì¸ ë¶€ë¶„. ë°ì´í„°ì˜ ì €ì¥, ì²˜ë¦¬, ì¡°íšŒ, ë³€ê²½ ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë©°, ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤„ ë°ì´í„° ìì²´ë¥¼ ë‹´ê³  ìˆìŒ.
    - SpringBoot ìƒì—ì„œì˜ í˜•íƒœ : Service í´ë˜ìŠ¤, Repository(DAO) í´ë˜ìŠ¤, í˜¹ì€ ë°ì´í„° ê°ì²´(DTO ë˜ëŠ” Entity) ë“±ì´ í•´ë‹¹í•¨.
  - View
    - ì—­í•  : ì‚¬ìš©ìì—ê²Œ _ë°ì´í„°ë¥¼ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” ì—­í• _ . ì‚¬ìš©ìì˜ ì…ë ¥(í´ë¦­, í¼ ì œì¶œ ë“±)ì„ ë°›ê³ , ê·¸ ê²°ê³¼ë¥¼ í™”ë©´ì— ë Œë”ë§í•¨. 'ì–´ë–»ê²Œ' ë³´ì—¬ì¤„ì§€ë¥¼ ë‹´ë‹¹(ê·¸ëŸ¬ë©´ ì €í¬ê°€ HTML / CSS ë¶€ë¶„ì´ ë– ì˜¤ë¥´ì£ ).
    - SpringBoot ìƒì—ì„œì˜ í˜•íƒœ : HTML / CSS / JSë¥¼ í†µí•´ êµ¬ì„±ëœ í˜ì´ì§€ë“¤ì´ë©°, SpringBootì—ì„œëŠ” ì£¼ë¡œ Thymeleaf, JSP(Java Server Page) ë“±ì˜ í…œí”Œë¦¿ ì—”ì§„ì„ ì‚¬ìš©í•˜ê±°ë‚˜, REST APIì˜ ê²½ìš°ì—ëŠ” JSON/XML ë“±ì˜ ë°ì´í„° í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•©ë‹ˆë‹¤. ê·¼ë° ìš°ë¦¬ëŠ” Reactë¡œ ì—°ê²°í• ê²ë‹ˆë‹¤.
- Controller
  - ì—­í•  : ì‚¬ìš©ìì˜ ìš”ì²­ì„ ë°›ì•„ ì²˜ë¦¬í•˜ê³ , Modelê³¼ Viewë¥¼ ì—°ê²°í•˜ëŠ” ì¤‘ì¬ì ì—­í• . ì‚¬ìš©ìê°€ 'ë¬´ì—‡ì„ í• ì§€'ì— ëŒ€í•œ ìš”ì²­ì„ ë¶„ì„í•˜ê³ , Modelì—ê²Œ í•„ìš”í•œ ì‘ì—…ì„ ì§€ì‹œí•œ í›„, ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì ì ˆí•œ Viewë¥¼ ì„ íƒí•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ì‘ë‹µ.
  - SpringBoot ìƒì—ì„œì˜ í˜•íƒœ : `@Controller, @RestController` ì• ë„ˆí…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤. `@RequestMapping` ë“±ì˜ ì• ë„ˆí…Œì´ì…˜ìœ¼ë¡œ íŠ¹ì • URL ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë©”ì„œë“œë¥¼ ì •ì˜.

## Sping MVCì˜ ë™ì‘ ì›ë¦¬(ìš”ì²­ ì²˜ë¦¬ íë¦„)
SpringBootëŠ” ë‚´ë¶€ì ìœ¼ë¡œ Spring MVC í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ì—¬ MVC íŒ¨í„´ì„ êµ¬í˜„. ëª¨ë“  ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ì¤‘ì•™ ì§‘ì¤‘ì‹ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬(Front Controller) ë°©ì‹ì´ í•µì‹¬.

- DispatcherServlet(ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿) - Spring MVCì˜ Core
  - ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  HTTP ìš”ì²­ì„ ê°€ì¥ ë¨¼ì € ë°›ì•„ì„œ ì²˜ë¦¬í•˜ëŠ” í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ ì—­í• . Spring BootëŠ” ë‚´ì¥ëœ ì›¹ ì„œë²„(ë³´í†µì€ ì•„íŒŒì¹˜ í†°ìº£ì…ë‹ˆë‹¤)ë¥¼ ì‚¬ìš©í•˜ë©°, ë³„ë„ì˜ ë³µì¡í•œ ì„¤ì • ì—†ì´ DispatcherServletì´ ìë™ ì„¤ì •ë©ë‹ˆë‹¤(Springìœ¼ë¡œ ê°œë°œí•˜ë©´ ì´ ì„œë²„ ì„¤ì •ë„ ê°œë°œìê°€ í•´ì•¼ í•©ë‹ˆë‹¤).

- ìš”ì²­ ì²˜ë¦¬ì˜ ë‹¨ê³„
  - ì‚¬ìš©ìê°€ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ íŠ¹ì • URLì„ ì…ë ¥í•˜ê±°ë‚˜ ë²„íŠ¼ì„ í´ë¦­í•  ë•Œ(HTTP ìš”ì²­ ë°œìƒ)ë¶€í„° í™”ë©´ì— ê²°ê³¼ê°€ í‘œì‹œë  ë•Œ ê¹Œì§€ì˜ ê³¼ì •ì„ ìƒì„¸ ì„¤ëª…í•©ë‹ˆë‹¤.
  1. ìš”ì²­ ìˆ˜ì‹ (Request Reception) : ì‚¬ìš©ìì˜ ìš”ì²­(ì˜ˆì‹œ : `GET /users/1`)ì´ `DispatcherServlet`ìœ¼ë¡œ ì „ë‹¬.
  2. í•¸ë“¤ëŸ¬ ë§¤í•‘(Handler Mapping) : 
    - `DispatcherServlet`ì€ `HanlderMapping`ì—ê²Œ ìš”ì²­ URLì„ ì²˜ë¦¬í•  ì ì ˆí•œ Controllerë¥¼ ì°¾ì•„ë‹¬ë¼ê³  ìš”ì²­.
    - `HanlderMapping`ì€ ì£¼ë¡œ `@Controller` í´ë˜ìŠ¤ì˜ `@RequestMapping` ì• ë„ˆí…Œì´ì…˜ì„ í™•ì¸í•´ì„œ ìš”ì²­ì„ ì²˜ë¦¬í•  íŠ¹ì • ë©”ì„œë“œë¥¼ ì°¾ê²Œ ë¨.
  3. Controller ì‹¤í–‰ :
    - `DispatcherServlet`ì€ ì°¾ì€ Controllerì˜ ë©”ì„œë“œë¥¼ `HandlerAdapter`ë¥¼ í†µí•´ ì‹¤í–‰.
    - ControllerëŠ” ìš”ì²­ì„ ë¶„ì„í•˜ì—¬ (í•„ìš”í•œ ê²½ìš°ì—) Service/Respository(Model) ê³„ì¸µì— ë°ì´í„° ì²˜ë¦¬(ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§)ë¥¼ ìš”ì²­.
    - ì˜ˆë¥¼ ë“¤ì–´, ì‚¬ìš©ì ì •ë³´ë¥¼ ì¡°íšŒí•˜ëŠ” ìš”ì²­ì´ë¼ë©´ Model ê³„ì¸µì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ë¡œë¶€í„° í•´ë‹¹ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê²Œ ë˜ê² ë„¤ìš”(ê·¸ëŸ°ë° ë¹„ë°€ë²ˆí˜¸ëŠ” ì•ˆë³´ì—¬ì£¼ê² ë„¤ìš” - Entityì˜ fieldë¥¼ í¸ì§‘í•œ ë²„ì „ì„ ì „ë‹¬í•´ì£¼ê² ë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤).
  4. ModelView ë°˜í™˜
    - Controllerì˜ _ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë‹´ì€ Model ë°ì´í„°ì™€ Viewì˜ ë…¼ë¦¬ì  ì´ë¦„ì„ í¬í•¨í•˜ëŠ”_ ModelAndView ê°ì²´(ë˜ëŠ” View ì´ë¦„ë§Œ, ë˜ëŠ” Modelë°ì´í„°ë§Œ)ë¥¼ `DispatcherServlet`ì—ê²Œ return.
  5. View ì´ë¦„ í•´ì„(View Resolution) :
    - `DispatcherServlet`ì€ `ViewResolver`ì—ê²Œ Viewì˜ ë…¼ë¦¬ì ì¸ ì´ë¦„(ì˜ˆë¥¼ ë“¤ì–´ "user-detail")ì„ ì „ë‹¬í•˜ì—¬ ì‹¤ì œ ë Œë”ë§ì„ ë‹´ë‹¹í•  View ê°ì²´ë¥¼ ì°¾ë„ë¡ ìš”ì²­.
  6. View ë Œë”ë§ ë° ì‘ë‹µ(View Rendering & Response) :
    - `DispatcherServlet`ëŠ” ìµœì¢…ì ìœ¼ë¡œ View ê°ì²´ì—ê²Œ Model ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê³  ë Œë”ë§ì„ ìš”ì²­í•©ë‹ˆë‹¤.
    - ViewëŠ” Model ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ìµœì¢…ì ì¸ HTML ì‘ë‹µ í˜ì´ì§€ë¥¼ ìƒì„±í•˜ê³ , ì´ ì‘ë‹µì€ `DispatcherServlet`ì„ ê±°ì³ ì‚¬ìš©ì(ë¸Œë¼ìš°ì €)ì—ê²Œ ì „ì†¡ë©ë‹ˆë‹¤.

    - ì‰½ê²Œ ì„¤ëª…í•˜ë©´ `GET users/1`ì´ë©´ DB ìƒì—ì„œì˜ user_idê°€ 1ì¸ ì• ì˜ ë°ì´í„°ë¥¼ ì´ìš©í•˜ì—¬ HTML ë¬¸ì„œë¥¼ ë§Œë“¤ê³ , 2ë¼ë©´ user_idê°€ 2ì¸ ì• ì˜ ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ HTML ë¬¸ì„œë¥¼ ë§Œë“¤ì–´ì„œ ë¸Œë¼ìš°ì €ë¡œ ë³´ì—¬ì¤€ë‹¤ê³  ë³´ì‹œë©´ ë˜ê² ìŠµë‹ˆë‹¤.

## SpringBoot 3.5.6ì—ì„œì˜ MVC íŠ¹ì§• ë° êµ¬í˜„ ì˜ˆì‹œ
SpringBootì—ì„œëŠ” Spring MVCë¥¼ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•´ì£¼ê¸° ë•Œë¬¸ì— ê°œë°œìëŠ” í•µì‹¬ ë¡œì§ì—ë§Œ ì§‘ì¤‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ë§Œ ì‹ ê²½ì“°ê³  ì„œë²„ ì„¤ì • ê·¸ëŸ°ê±´ ì¢€ ì•ˆí•´ë„ ëœë‹¤ ê·¸ëŸ° ëœ»ì…ë‹ˆë‹¤). 3.xx.xx ë²„ì „ì€ Java 17ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ê³ , ì„¤ì • ê°„ì†Œí™”ì™€ í¸ì˜ì„±ì´ ë” ëŠ˜ì—ˆìŠµë‹ˆë‹¤.

- Controller êµ¬í˜„ ì˜ˆì‹œ
```java

@Controller   // í•´ë‹¹ í´ë˜ìŠ¤ê°€ Controllerì„ì„ ì„ ì–¸
public class UserController {
  private final UserService userService;  // Model ê³„ì¸µê³¼ì˜ ìƒí˜¸ì‘ìš©ì„ ìœ„í•œ Serviceë¥¼ ì£¼ì…(Injection)

  // ìƒì„±ì ì£¼ì…
  public UserController(UserService userService) {
    this.userService = userService;
  }

  // GET ìš”ì²­ìœ¼ë¡œ /users/123
  @GetMapping("/users/{userId}")
  public String getUserDetail(@PathVariable Long userId, Model model) {
    // 1. ControllerëŠ” Model(Service)ì— ë°ì´í„° ì²˜ë¦¬ë¥¼ ìš”ì²­
    User user = userService.findUserById(userId);

    // 2. ControllerëŠ” Model ë°ì´í„°ë¥¼ Viewì— ì „ë‹¬í•˜ê¸° ìœ„í•´ Model ê°ì²´ë¥¼ ë‹´ìŒ
    model.addAttribute("user", user);
    model.addAttribute("pageTitle", "ì‚¬ìš©ì ìƒì„¸ ì •ë³´");

    // 3. ControllerëŠ” Viewì˜ ë…¼ë¦¬ì  ì´ë¦„ì„ return
    // : (ViewResolverê°€ 'user-detail'ì— í•´ë‹¹í•˜ëŠ” í…œí”Œë¦¿ì„ ì°¾ìŒ)
    return "user-detail";
  }
}
```
ì´ìƒì˜ ì½”ë“œëŠ” Thymeleafë¥¼ í™œìš©í•˜ì—¬ SpringBootì™€ HTML ë¬¸ì„œë¥¼ ì—°ê²°í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì €í¬ê°€ ë°›ì€ êµì¬ ì¤‘ì— í•˜ë‚˜ì¸ SpringBootë¡œ ë°±ì—”ë“œ ê°œë°œìë˜ê¸° ì±…ì—ë„ ë™ì¼í•œ ë°©ì‹ì˜ ì½”ë“œ êµ¬í˜„ì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤.

- Model(Service ê³„ì¸µ) êµ¬í˜„ ì˜ˆì‹œ
  - Controllerì˜ ìš”ì²­ì„ ë°›ì•„ì„œ ì‹¤ì œ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ì˜ì—­ì…ë‹ˆë‹¤. - ì €í¬ê°€ Javaì˜ ì œì–´ë¬¸ì„ ë°°ìš´ ì´ìœ ê°€ ì—¬ê¸° ë¶€ë¶„ì— íŠ¹íˆ ë§ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤.
```java
@Service    // í•´ë‹¹ í´ë˜ìŠ¤ê°€ Service(Model)ì„ì„ ëª…ì‹œ
public class UserService {
  private final UserRepository userRepository;

  public userService(UserRepository userRepository) {
    this.userRepository = userRepository;
  }

  public User findUserById(Long id) {
    // UserRepositoryì—ì„œ ë‹´ê²¨ìˆëŠ” DBë¥¼ ì¡°íšŒí•´ì„œ Javaì—ì„œ ì“¸ ìˆ˜ ìˆë„ë¡ í•´ì•¼ê² ë„¤ìš”.
    User user = userRepository.findById(id);
    if(id == user.getId()) {
      return user;
    }
    return null;
  }
}
```
- ê·¸ ë‹¤ìŒì€ View íŒŒíŠ¸ë¥¼ ì‘ì„±í•´ì•¼í•˜ëŠ”ë°, Thymeleafë¡œ ì“°ëŠ” ì˜ˆì‹œë¥¼ êµ³ì´ ë³´ì—¬ë“œë¦´ í•„ìš”ëŠ” ì—†ì„ ê²ƒ ê°™ì•„ì„œ ê·¸ëƒ¥ ì§€ë‚˜ê°€ê² ìŠµë‹ˆë‹¤. ì €í¬ëŠ” Reactë¡œ ì‘ì„±í• ê²ë‹ˆë‹¤. í˜¹ì‹œë‚˜ Thymeleaf í”„ë ˆì„ì›Œí¬ì˜ ì˜ˆì‹œê°€ ê¶ê¸ˆí•˜ì‹œë©´ ì´ìƒì˜ êµì¬ë¥¼ í™•ì¸í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${pageTitle}">ì‚¬ìš©ì ìƒì„¸</title> 
</head>
<body>
    <h1>ì‚¬ìš©ì ìƒì„¸ ì •ë³´</h1>
    
    <p>ID: <span th:text="${user.id}">123</span></p>
    <p>ì´ë¦„: <span th:text="${user.name}">ê¹€ì² ìˆ˜</span></p>
    <p>ì´ë©”ì¼: <span th:text="${user.email}">chulsoo@email.com</span></p>
    
    <a href="/">ëŒì•„ê°€ê¸°</a>
</body>
</html>
```

## MVC íŒ¨í„´ ì‚¬ìš©ì˜ ì¥ì 
1. ê´€ì‹¬ì‚¬ ë¶„ë¦¬(Seperation of Concerns) :
  - ë°ì´í„° ì²˜ë¦¬(Model), í™”ë©´ í‘œì‹œ(View), ìš”ì²­ ì²˜ë¦¬(Controller)ê°€ ëª…í™•í•˜ê²Œ ë¶„ë¦¬ë˜ì–´ ìˆì–´, ê° ë¶€ë¶„ì„ ë…ë¦½ì ìœ¼ë¡œ ê°œë°œí•˜ê³  ìˆ˜ì •í•  ìˆ˜ ìˆìŒ.
    - ë³´ì—¬ì£¼ëŠ” ë¶€ë¶„ì´ ì˜ëª»ëë‹¤ -> View ìˆ˜ì •
    - DBì—ì„œ ê°€ì ¸ì˜¤ì§€ë¥¼ ëª»í•œë‹¤ -> Repository or Service ìˆ˜ì •
    - ìš”ì²­ ì—”ë“œí¬ì¸íŠ¸ê°€ ì˜ëª»ëë‹¤ -> Controller ìˆ˜ì • ë“±
2. ë†’ì€ ì¬ì‚¬ìš©ì„± :
  ë™ì¼í•œ Model(ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§)ì„ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ View(ì›¹í˜ì´ì§€, ëª¨ë°”ì¼ ì•±, REST API ë“±)ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŒ(ëŒ€ì¶© ì‚¬ì´ì¦ˆ ì¤„ì—¬ê°€ì§€ê³  ëª¨ë°”ì¼ ë²„ì „ ì›¹ í˜ì´ì§€ë¥¼ ë§Œë“ ë‹¤ë“ ì§€, íšŒì› ê°€ì… ì°½ì„ ì¬í™œìš©í•´ì„œ ë¡œê·¸ì¸ ì°½ìœ¼ë¡œ ì“´ë‹¤ë“ ì§€ ë“±ì…ë‹ˆë‹¤).
3. ìœ ì§€ ë³´ìˆ˜ì˜ ìš©ì´ì„± :
  - í™”ë©´ ë””ìì¸ì´ ë³€ê²½ë˜ì–´ë„ Controllerë‚˜ Model ì½”ë“œëŠ” ê±°ì˜ ìˆ˜ì •í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ë°˜ëŒ€ë¡œ, ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì´ ë°”ë€Œì–´ë„ Viewì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì´ ìµœì†Œí™”ë©ë‹ˆë‹¤.
  - ì§€ê¸ˆ ì¹´ì¹´ì˜¤í†¡ ìƒê°í•´ë³´ì‹œë©´ Viewê°€ ë°”ë€Œì—ˆë‹¤ê³  ë³¼ ìˆ˜ ìˆê² ì£ , í•˜ì§€ë§Œ DBì— ì €í¬ í”„ë¡œí•„ ì‚¬ì§„ë“¤ì€ ë‹¤ ìˆì„ê²ë‹ˆë‹¤. ê°€ì¥ ìµœê·¼ idë¥¼ ê¸°ì¤€ìœ¼ë¡œ í”„ë¡œí•„ ì‚¬ì§„ì—, ë‚˜ë¨¸ì§€ ì‚¬ì§„ë“¤ì€ ì»¤ë²„ ì‚¬ì§„ì— ì§‘ì–´ë„£ì–´ë†¨ë˜ ê±¸ ì¸ìŠ¤íƒ€ê·¸ë¨ì‹ìœ¼ë¡œ ê³ ì³ë†¨ë‹¤ê³  ë³´ì‹œë©´ ë˜ê² ë„¤ìš”. ì¦‰ DBì— ìˆëŠ” ë‹¤ë¥¸ ë¶€ë¶„ë“¤ì˜ ì½”ë“œ ìˆ˜ì •ì´ ë§‰ ì—„ì²­ë‚˜ê²Œ ì¼ì–´ë‚˜ì§€ëŠ” ì•Šì•˜ì„ ê±°ë€ ê²ë‹ˆë‹¤.
4. í…ŒìŠ¤íŠ¸ ìš©ì´ì„± :
  - ê° êµ¬ì„± ìš”ì†Œê°€ ë…ë¦½ì ì´ê¸° ë•Œë¬¸ì— ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì‰½ê²Œ ì‘ì„±í•˜ê³  ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.(GET ìš”ì²­ë§Œ í™•ì¸í•œë‹¤ë“ ì§€ ë“±ìœ¼ë¡œ ì €í¬ê°€ ê¸ˆìš”ì¼ì— ì´ë¯¸ ì‘ì„±í•´ë´¤ìŠµë‹ˆë‹¤) íŠ¹íˆ Controllerì™€ Modelì˜ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì€ Viewì™€ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•©ë‹ˆë‹¤(postmanìœ¼ë¡œ, HeidiSQLë¡œ CRUD í…ŒìŠ¤íŠ¸ë¥¼ ë§ˆë¬´ë¦¬ ì§€ì—ˆìŠµë‹ˆë‹¤, í™”ë©´ì€ ì•„ì˜ˆ ì—†ëŠ”ë°ë„ìš”).
5. ë³‘ë ¬ ê°œë°œ ê°€ëŠ¥ :
  - í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì(View)ì™€ ë°±ì—”ë“œ ê°œë°œì(Controller, Model)ê°€ ì„œë¡œì˜ ì‘ì—…ì— í¬ê²Œ ì˜í–¥ì„ ì£¼ì§€ ì•Šìœ¼ë©´ì„œ ë™ì‹œ ê°œë°œì´ ê°€ëŠ¥í•´ ì†ë„ê°€ í–¥ìƒë©ë‹ˆë‹¤.

## ìš”ì•½
1. MVCëŠ” Model / View / Controllerë¡œ _ì½”ë“œë¥¼ ë¶„ë¦¬_ í•˜ëŠ” _ë””ìì¸ íŒ¨í„´_ ì…ë‹ˆë‹¤.
2. `DispatcherServlet` ì´ë¼ëŠ” í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í†µí•˜ì—¬ ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
3. ControllerëŠ” ìš”ì²­ì„ ë°›ê³  Modelì„ í˜¸ì¶œí•˜ì—¬ Viewë¥¼ ì„ íƒí•˜ëŠ” ì¤‘ì¬ì ì—­í• ì„ í•©ë‹ˆë‹¤.
  - Viewì—ì„œ ìš”ì²­(Request) -> Controller ë‚´ë¶€ì˜ ì½”ë“œì—ì„œ Service í˜¸ì¶œ -> Serviceê°€ Repositoryë¥¼ í˜¸ì¶œí•˜ì—¬ DB ê´€ë ¨ ì •ë³´ ìŠµë“ í›„ ë°ì´í„° ì²˜ë¦¬ -> Controllerë¡œ ë³´ë‚´ì£¼ë©´ -> Controllerê°€ ì ì ˆí•œ .html ë¬¸ì„œë¥¼ ì‘ë‹µ(Response). / ì €í¬ëŠ” ResponseEntity ì“¸ê²ë‹ˆë‹¤.
4. Modelì€ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ê³¼ ë°ì´í„°ë¥¼ ë‹´ë‹¹(Entity - Repository - Service)


# Spring Initializrë¥¼ í†µí•´ì„œ cardatabase_4ë¥¼ ë§Œë“¤ê²ë‹ˆë‹¤.
https://start.spring.io
í•„ìš”í•œ ì˜ì¡´ì„± ì„¸ ê°œ -> Spring Web / Spring Boot Dev Tools / Lombokì„ ì¶”ê°€í•œ SpringBoot í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•œ í›„ì— ì—¬ëŸ¬ë¶„ì˜ì–´ì´ë¦„/korit_07_springboot í´ë” ë‚´ì— ë¶™ì—¬ë„£ì–´ì„œ intellijë¡œ ì‹¤í–‰ê¹Œì§€ì‹œí‚¤ê² ìŠµë‹ˆë‹¤.
ê·¸ëŸ¬ë©´ gradle í”„ë¡œì íŠ¸ ëŒì•„ê°€ì•¼í•˜ëŠ”ë° ë§Œì•½ì— ì‹¤í–‰ ì•ˆë˜ëŠ” ê°ˆìƒ‰ ì»¤í”¼ ì•„ì´ì½˜ ëœ¬ë‹¤ë©´ ì—¬ëŸ¬ë¶„ì´ ì²˜ë¦¬í•˜ì…”ì•¼ê² ìŠµë‹ˆë‹¤.
ë‹¤ í•˜ì‹  ë¶„ë“¤ì€ Car / CarRepository / Owner / OwnerRepository ë§Œë“¤ê³  ê¸°ë³¸ì ì¸ field ì„¤ì •ë“¤ ì¢€ í•´ë†“ê³  ëŒ€ê¸°í•˜ê² ìŠµë‹ˆë‹¤.

# í”„ë¡œì íŠ¸ ë§Œë“  í›„ì— ì‹¤í–‰ ì—¬ë¶€ë¥¼ ë”°ì¡Œì„ ë•Œ ì‹¤í–‰ì´ ë˜ëŠ” ì‹œì ì„ ê¸°ì¤€ìœ¼ë¡œ í•©ë‹ˆë‹¤.
1. Car / CarRepositoryë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.
  - ê·¸ëŸ°ë° CarRepository ë¶€ë¶„ì—ì„œ JpaRepositoryë¥¼ ìƒì† ë°›ìœ¼ë ¤ê³  í•˜ë‹ˆ ê²€ìƒ‰ì´ ì•ˆëìŠµë‹ˆë‹¤.
  	`implementation 'org.springframework.boot:spring-boot-starter-data-jpa'`ê°€ ì—†ì–´ì„œ.
  - ê·¸ë˜ì„œ ì¶”ê°€í•´ì£¼ê³  ì½”ë¼ë¦¬ ëˆŒë €ìŠµë‹ˆë‹¤.
  - ì—¬ì „íˆ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤ -> Carì˜ fieldë¡œ Ownerê°€ ìˆëŠ”ë° í˜„ì¬ Owner Entityê°€ ì—†ì–´ì„œ.
2. Owner / OwnerRepositoryë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤.
  - ê·¸ë¦¬ê³  ì‹¤í–‰ì‹œí‚¤ë ¤ê³  í•´ë³´ë‹ˆê¹Œ ì‹¤í–‰ ì•ˆë©ë‹ˆë‹¤.
  - ì™œ?
  - application.propertiesì— ê´€ë ¨ ì„¤ì •ë“¤ ì•„ë¬´ ê²ƒë„ ì•ˆ ë„£ì–´ì„œ.
  - build.gradleì— mariadb ê´€ë ¨ ì˜ì¡´ì„± ì¶”ê°€ ì•ˆí•´ì„œ.
  - ì´ìƒì˜ ì„¤ì •ë“¤ì„ ë§ˆë¬´ë¦¬ ì§“ê³  ìŠ¤í”„ë§ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰ì‹œì¼°ì„ ë•Œì˜ ê²°ê³¼ê°’ì€?
    - HeidiSQL ì¼œì„œ `SELECT * FROM car;` í–ˆì„ ë•Œ row=0ì¸ í…Œì´ë¸”ì´ ìƒì„± ì™„ë£Œë˜ì–´ìˆì–´ì•¼ í•¨.
  - í•˜ì§€ë§Œ Controller íŒŒíŠ¸ë¥¼ ì‘ì„±í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— HeidiSQLì—ì„œëŠ” ë°ì´í„°ë¥¼ í™•ì¸ ë° ì¶”ê°€ê°€ ê°€ëŠ¥í•˜ì§€ë§Œ postmanì„ í†µí•´ì„œëŠ” ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒë„ í™•ì¸ëìŠµë‹ˆë‹¤.

3. ì´ìƒì˜ ê³¼ì •ì—ì„œ ìƒê¸´ ë¬¸ì œë¥¼ ë³´ì•„ ì €í¬ëŠ” MVC íŒ¨í„´ì„ ë§Œë“¤ì–´ì•¼ postmanì—ì„œ CRUDë¥¼ í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë©´ Model íŒŒíŠ¸ì—ì„œ ë§Œë“  Entityì™€ Repositoryë¥¼ ì œì™¸í•˜ê³  Service íŒŒíŠ¸ë„ ë§Œë“¤ì–´ì•¼í•˜ê³ , Controller íŒŒíŠ¸ì— í•´ë‹¹í•˜ëŠ” Controller í´ë˜ìŠ¤ë„ ë§Œë“¤ì–´ì•¼ê² ë„¤ìš”.
  - ë£¨íŠ¸ í”„ë¡œì íŠ¸ íŒ¨í‚¤ì§€ì—ì„œ service íŒ¨í‚¤ì§€ë¥¼ ìƒì„±í•˜ê³  -> CarServiceë¥¼ ìƒì„±í•˜ê² ìŠµë‹ˆë‹¤.
```java
package com.example.cardatabase4.service;

import com.example.cardatabase4.domain.Car;
import com.example.cardatabase4.domain.CarRepository;
import org.springframework.stereotype.Service;

import java.util.List;

@Service
public class CarService {
    private final CarRepository carRepository;

    public CarService(CarRepository carRepository) {
        this.carRepository = carRepository;
    }

    //ëª¨ë“  ìë™ì°¨ ëª©ë¡ì„ ì¡°íšŒí•œë‹¤ê³  ê°€ì •í•˜ê² ìŠµë‹ˆë‹¤.
    public List<Car> getCars() {
        return carRepository.findAll();
    }
}
```

4. ê·¸ëŸ¬ë©´ ì´ì œ í˜ì´ì§€ë¥¼ ë³´ì—¬ì¤„ ìˆ˜ ìˆë„ë¡í•´ì•¼í•˜ëŠ”ë°, ì €í¬ëŠ” ì´ê±¸ Reactì™€ ì—°ê²°í• ê±°ë‹ˆê¹Œ Viewì™€ ì—°ê²°í•˜ëŠ”ê±´ ì•„ë‹ˆê³  ResponseEntityì™€ ì—°ê²°í•˜ê¸° ìœ„í•œ CarControllerë¥¼ ì‘ì„±í• ê²ë‹ˆë‹¤.
  - ë£¨í”„ í”„ë¡œì íŠ¸ íŒ¨í‚¤ì§€ì—ì„œ webì„ ìƒì„± -> CarControllerë¥¼ ë§Œë“¤ê² ìŠµë‹ˆë‹¤.

```java
//CarService.java
package com.example.cardatabase4.service;

import com.example.cardatabase4.domain.Car;
import com.example.cardatabase4.domain.CarRepository;
import org.springframework.stereotype.Service;

import java.util.List;

@Service
public class CarService {
    private final CarRepository carRepository;

    public CarService(CarRepository carRepository) {
        this.carRepository = carRepository;
    }

    //ëª¨ë“  ìë™ì°¨ ëª©ë¡ì„ ì¡°íšŒí•œë‹¤ê³  ê°€ì •í•˜ê² ìŠµë‹ˆë‹¤.
    public List<Car> getCars() {
        return carRepository.findAll();
    }

    //ìƒˆë¡œìš´ ìë™ì°¨ ì €ì¥
    public Car addCar(Car car) {
        return carRepository.save(car);
    }
}

// CarController.java
package com.example.cardatabase4.web;

import com.example.cardatabase4.domain.Car;
import com.example.cardatabase4.service.CarService;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@RestController
@RequestMapping("/api")
public class CarController {
    private final CarService carService;

    public CarController(CarService carService) {
        this.carService = carService;
    }

    // 1. ëª¨ë“  ìë™ì°¨ ì •ë³´ ì¡°íšŒ (GET /api/cars)
    @GetMapping("/cars")
    public List<Car> getCars() {
        return carService.getCars();
    }

    // 2. ì°¨ëŸ‰ í•œ ëŒ€ ì¶”ê°€ (POST /api/cars)
    @PostMapping("/cars")
    public ResponseEntity<Car> addCar(@RequestBody Car car) {
        Car savedCar = carService.addCar(car);

        return new ResponseEntity<>(savedCar, HttpStatus.CREATED);
    }
}
```

# .map()
í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì˜ í•µì‹¬ ê°œë… ì¤‘ í•˜ë‚˜ë¡œ, Collectionì´ë‚˜ ì»¨í…Œì´ë„ˆ ê°ì²´ ë‚´ë¶€ì˜ _ê° ìš”ì†Œë¥¼ ë³€í™˜_ í•˜ì—¬ ìƒˆë¡œìš´ ì»¬ë ‰ì…˜ì´ë‚˜ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ëŠ” ë° ì‚¬ìš©.

## .map()ì˜ ì „ë°˜ì  ì •ì˜
- ëª©ì  : ì»¨í…Œì´ë„ˆ ê°ì²´(ì˜ˆ: Strem, Optional) ë‚´ë¶€ì˜ ê°’ì„ ë‹¤ë¥¸ íƒ€ì… ë˜ëŠ” í˜•íƒœì˜ ê°’ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ìƒˆë¡œìš´ ì»¨í…Œì´ë„ˆë¥¼ ë°˜í™˜.
- ê° elementì— ì ìš©ë  ë³€í™˜ í•¨ìˆ˜(Function)ì„ argumentë¡œ ë°›ìŠµë‹ˆë‹¤. -> ê·¸ë˜ì„œ ëŒë‹¤ì‹ì´ í•„ìˆ˜ì 
- ì›ë³¸ ë°ì´í„°ëŠ” ë³€ê²½í•˜ì§€ ì•Šê³  ë³€í™˜ëœ elementë¥¼ ë‹´ëŠ” _ìƒˆë¡œìš´ ê°ì²´_ ë¥¼ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤.(í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì˜ íŠ¹ì§•).

## .map()ì´ ì¡´ì¬í•˜ëŠ” ì£¼ìš” ìë£Œí˜•(Java ê¸°ì¤€)
1. `Optional<T>` : ê°’ì´ ìˆì„ ìˆ˜ë„ ìˆê³  ì—†ì„ ìˆ˜ë„ ìˆëŠ” _ë‹¨ì¼ ì»¨í…Œì´ë„ˆ_
  - ì—­í•  : ê°’ì´ ì¡´ì¬í•  ê²½ìš°ì—ë§Œ ê·¸ ê°’ì„ ë°˜í™˜í•˜ê³ , ê·¸ ê²°ê³¼ë¥¼ ë‹¤ì‹œ `Optional`ë¡œ ê°ì‹¸ì„œ return. ê°’ì´ ë¹„ì–´ìˆëŠ” ê²½ìš°ì—ëŠ” ë¹„ì–´ìˆëŠ” Optionalì„ return
  - ì˜ˆì‹œ : `Optional<User>`ë¥¼ `Optional<String>`ìœ¼ë¡œ ë³€í™˜í•  ë•Œ ì‚¬ìš© ë“±.

2. `Stream<T>` : ë°ì´í„°ì†ŒìŠ¤(ì»¬ë ‰ì…˜, ë°°ì—´ ë“±)ì—ì„œ elementë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©.
  - ì—­í•  : Stream ë‚´ì˜ ëª¨ë“  elementì— ëŒ€í•˜ì—¬ argumentë¡œ ë“¤ì–´ì˜¨ ë³€í™˜ í•¨ìˆ˜(ëŒë‹¤ì‹ í˜•íƒœ)ë¥¼ ì ìš©í•˜ì—¬, ë³€í™˜ëœ elementë¥¼ ë‹´ëŠ” ìƒˆë¡œìš´ ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±.
  - ì˜ˆì‹œ : `Stream<String>`(ë‹¨ì–´ ëª©ë¡)ì„ `Stream<Integer>`(ê° ë‹¨ì–´ì˜ ê¸¸ì´)ë¡œ ë³€í™˜

3. Collection : List, Set ë“±ì˜ ìë£Œ êµ¬ì¡°
  - ì—­í•  : ëŒ€ë¶€ë¶„ì˜ ê°ì²´ ì§€í–¥ ì–¸ì–´ì—ì„œ ì»¬ë ‰ì…˜ì´ ìì²´ì ìœ¼ë¡œ .map()ì„ ì§€ì›í•˜ëŠ”ë°, Javaì—ì„œëŠ” ì»¬ë ‰ì…˜ì„ ì§ì ‘ ë³€í™˜í•˜ê¸° ìœ„í•´ Streamì„ ê±°ì³ì•¼í•©ë‹ˆë‹¤.

## ì˜ˆì‹œ
1. Streamì—ì„œ ì‚¬ìš©í•˜ê¸°(ê°€ì¥ í”í•¨)
```java
public class StreamMapExample{
  public static void main(String[]args){
    List<Integer> numbers = Arrays.asList(1,2,3,4,5);

    // 1. stream í˜•íƒœë¡œ ë°”ê¾¸ëŠ” ì‘ì—…
    List<Integer> squaredNumbers = numbers.stream()
    // 2. .map()ìœ¼ë¡œ ê° element(1,2,3,4,5)ì— n*nì„ í•˜ë„ë¡ ë‚´ë¶€ì— ëŒë‹¤ì‹ ì ìš©
    .map(n -> n*n)
    // 3. í˜„ì¬ëŠ” streamì´ë‹ˆê¹Œ ë‹¤ì‹œ Listë¡œ ë°”ê¿”ì¤˜ì•¼ í•©ë‹ˆë‹¤.
    .collect(Collectors.toList());

    System.out.printlin(SquaredNumbers); //ê²°ê³¼ê°’ [1,4,9,16,25]
    System.out.printlin(numbers); // ê²°ê³¼ê°’ : [1,2,3,4,5] <= ì›ë³¸ì€ ê·¸ëŒ€ë¡œ
  }
}
```

2. Optionalì—ì„œ ì‚¬ìš©í•˜ê¸°(ê°’ì˜ ì•ˆì „í•œ ì ‘ê·¼ ë° ë³€í™˜)
ì˜ˆë¥¼ ë“¤ì–´ User ê°ì²´ì—ì„œ ì´ë©”ì¼ ì£¼ì†Œë§Œ ê°€ì§€ê³  ì˜¤ëŠ”ë°, User ê°ì²´ê°€ ì¡´ì¬í•  ë•Œë§Œ ë™ì‘í•˜ë„ë¡ ë³´ì¥
```java
class User{
  private String email;
  public user(String email) {this.email = email};
  public String getEmail()  {return email};
}

public class OptionalMapExample {
  // ì‚¬ìš©ìë¥¼ ì°¾ì§€ ëª»í–ˆì„ ë•ŒëŠ” ë¹„ì–´ìˆëŠ” Optionalì„ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œ ì •ì˜í• ê²ë‹ˆë‹¤.
  //(ìš°ë¦¬ê°€ ì´ëŸ°ê±¸ ì•ˆì“´ ì´ìœ ëŠ” extends JpaRepository ë•Œë¬¸ì´ë¼ëŠ” ê±° ìŠì§€ ë§ê¸¸.)
  public static Optional<User> findUser(boolean found){
    //returnì— ì‚¼í•­ì—°ì‚°ì ì”€.
    return found ? Optional.of(new User("kim@test.com")) : Optional.empty();
  }

  public static void main(String[] args) {
    // 1. User ê°ì²´ê°€ ìˆëŠ” ê²½ìš°ë¥¼ ì˜ˆì‹œë¡œ.
    String emailFound = findUser(true)
    // User ê°ì²´ê°€ ìˆìœ¼ë©´ getEmail() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ Stringìœ¼ë¡œ ë³€í™˜ë  ìˆ˜ ìˆë˜ë¡.map() ì ìš©
    .map(User:: getEmail)
    // ë§Œì•½ì— Optional<String>ì´ ë¹„ì–´ìˆìœ¼ë©´ "N/A"ë¥¼ ë°˜í™˜í•˜ë„ë¡ ì‘ì„±
    .orElse("N/A");

    System.out.println("E-mail : " + emailFound); // ê²°ê³¼ê°’ : E-mail : kim1@test.com
  }

  public static void main(String[] args) {
    // 1. User ê°ì²´ê°€ ìˆëŠ” ê²½ìš°ë¥¼ ì˜ˆì‹œë¡œ.
    String emailNotFound = findUser(false)
    // User ê°ì²´ê°€ ìˆìœ¼ë©´ getEmail() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ Stringìœ¼ë¡œ ë³€í™˜ë  ìˆ˜ ìˆë˜ë¡.map() ì ìš©
    .map(User:: getEmail)
    // ë§Œì•½ì— Optional<String>ì´ ë¹„ì–´ìˆìœ¼ë©´ "N/A"ë¥¼ ë°˜í™˜í•˜ë„ë¡ ì‘ì„±
    .orElse("N/A");

    System.out.println("E-mail : " + emailFound); // ê²°ê³¼ê°’ : E-mail : N/A
  }
}
```